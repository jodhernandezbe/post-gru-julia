# Import libraries
using Test

# Import modules
include("../src/data_preprocessing.jl")

# Unit test for the "generate_sequences" function
@testset "Test for generate_sequences" begin
    # Declare the test input
    seq_length = 3
    data = [-0.49456697, -0.81657985, -0.94597316, 0.92148375,
            1.75501578, 0.55481991, 0.91906376, 0.65666595,
            0.95823018, -0.67045147, 0.42680983, 0.44061339,
            0.54575655, -0.89406224, 0.60294073, -2.3391778,
            0.45777018, -0.20006094, 0.23918088, 0.3523767]
    
    # Expected results
    expected_target = [0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0;;;
              0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0;;;
              0.92148375 1.75501578 0.55481991 0.91906376 0.65666595 0.95823018 -0.67045147 0.42680983 0.44061339 0.54575655 -0.89406224 0.60294073 -2.3391778 0.45777018 -0.20006094 0.23918088 0.3523767]
    expected_input = [-0.49456697 -0.81657985 -0.94597316 0.92148375 1.75501578 0.55481991 0.91906376 0.65666595 0.95823018 -0.67045147 0.42680983 0.44061339 0.54575655 -0.89406224 0.60294073 -2.3391778 0.45777018;;;
            -0.81657985 -0.94597316 0.92148375 1.75501578 0.55481991 0.91906376 0.65666595 0.95823018 -0.67045147 0.42680983 0.44061339 0.54575655 -0.89406224 0.60294073 -2.3391778 0.45777018 -0.20006094;;;
            -0.94597316 0.92148375 1.75501578 0.55481991 0.91906376 0.65666595 0.95823018 -0.67045147 0.42680983 0.44061339 0.54575655 -0.89406224 0.60294073 -2.3391778 0.45777018 -0.20006094 0.23918088]

    # Test the output
    input, target = generate_sequences(data, seq_length)
    @test size(input) == (1, 17, 3)
    @test size(target) == (1, 17, 3)
    @test input == expected_input
    @test target == expected_target
end